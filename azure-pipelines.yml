trigger:
  branches:
    include:
      - main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'

- script: echo "Starting deployment"
  displayName: 'Start Deployment'

- task: CopyFilesOverSSH@0
  inputs:
    sshEndpoint: 'your-ssh-service-connection-name'
    sourceFolder: '$(Build.SourcesDirectory)'
    contents: '**'
    targetFolder: '/home/your-user/your-app-folder'

- task: SSH@0
  inputs:
    sshEndpoint: 'your-ssh-service-connection-name'
    runOptions: 'inline'
    inline: |
      cd /home/your-user/your-app-folder
      chmod +x deploy.sh
      ./deploy.sh
  displayName: 'Run Deployment Script'
